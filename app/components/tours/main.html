<div co-bind="'sources'"></div>
<div co-bind="'group_id'"></div>
<div co-bind="'muted'"></div>

<header ng-controller="Modals">
    <img src="branding/images/oh_logo.png">
    <span co-module="'Computer'" co-bind="'authenticated'">
        <button ng-show="authenticated >= 0" id="captioning" ng-touch="showModal('captioning')"><i class="fa fa-cog"></i></button>
    </span>
    <button ng-touch="coModuleInstance.$exec('toggle_mute')" id="picture-mute">
        <i class="fa fa-desktop"></i>
        <i ng-show="!muted" class="fa fa-circle-o"></i>
        <i ng-show="muted" class="fa fa-ban"></i>
    </button>
    <button ng-touch="showModal('finish')" id="power-off"><i class="fa fa-power-off"></i></button>
    <modal name="finish" title="Finish Presentation?">
        <p>
            <b>Pressing finish will blank the display</b>
        </p>
        <menu>
            <button class="cancel" ng-touch="closeModal('finish')">Cancel</button>
            <button class="ok" ng-touch="coModuleInstance.$exec('shutdown'); setState('shutdown')">Finish</button>
        </menu>
        <div style="clear: both"></div>
    </modal>

    <modal id="captioning" name="captioning" title="Captioning Control">
        <span co-bind="'explicit_stop'"></span>
        <span co-bind="'has_screen'"></span>
        <span co-bind="'can_blind'"></span>
        <span co-bind="'can_mount'"></span>
        <div class="screen">
            <h3>Screen Mounting</h3>
            <table ng-if="has_screen && can_blind">
                <tr>
                    <td><button ng-touch="coModuleInstance.$exec('blind_up'); ">Blind Up</button></td>
                    <td><button ng-touch="coModuleInstance.$exec('blind_down'); ">Blind Down</button></td>
                    <td ><button ng-touch="coModuleInstance.$exec('blind_stop'); ">Stop</button></td>
                </tr>
            </table>
            <table ng-if="(has_screen && can_mount) || !has_screen">
                <tr>
                    <td><button ng-touch="coModuleInstance.$exec('open_mounting'); ">Open TV</button></td>
                    <td><button ng-touch="coModuleInstance.$exec('close_mounting'); ">Close TV</button></td>
                    <td ng-if="explicit_stop"><button ng-touch="coModuleInstance.$exec('stop_mounting'); ">Stop</button></td>
                </tr>
            </table>
        </div>
        <div co-module="'Display'" co-bind="'power'" exec>
            <b>Display Power:</b>&nbsp;&nbsp;&nbsp;<div ios-toggle model="power"></div>
            <span class="onoff">{{power ? 'On' : 'Off'}}</span>
        </div>
        <div co-module="'Computer'" co-bind="'connected'">
            <h3>Select Mode:</h3>
            <button ng-touch="coModuleInstance.$exec('launch_application', 'c:\\aca-apps\\operahouse\\aca-kiosk.bat');">Tours</button>
            <button ng-touch="coModuleInstance.$exec('launch_application', 'c:\\aca-apps\\operahouse\\aca-caption.bat');">Captioning</button>
        </div>
        <div>
            <h3 co-bind="'show_volume'">Select Audio:</h3>
            <button ng-touch="coModuleInstance.$exec('speaker_select', 'external');">Tours Headset</button>
            <button ng-touch="coModuleInstance.$exec('speaker_select', 'internal');">Speakers</button>
            <div id="captionslide" ng-show="show_volume" co-module="'Display'" co-bind="'volume'" exec>
                <div co-range model="volume"></div>
            </div>
        </div>
        <div style="clear: both"></div>
    </modal>

    <modal name="scheduled" title="Presentation Scheduled">
        <p>
            <b>The video will begin playing momentarily</b>
        </p>
        <menu>
            <button class="ok" ng-touch="closeModal('scheduled')">OK</button>
        </menu>
        <div style="clear: both"></div>
    </modal>

    <modal name="schedfailed" title="Failed to Schedule">
        <p>
            <b>An error occured whilst trying to schedule the video</b>
            <br /> Click OK to try scheduling again.
        </p>
        <menu>
            <button class="ok" ng-touch="closeModal('schedfailed')">OK</button>
        </menu>
        <div style="clear: both"></div>
    </modal>
</header>

<div co-bind="'group_id'" ng-controller="Modals">
    <div ng-controller="ToursCtrl">
        <tabs current="tab" auto-select="false">
            <pane ng-repeat="lang in languages" text="{{lang.name}}">

                <div>
                    <h1>{{lang.name}}</h1>
                    <div btn-group="lang.name">
                        <button ng-repeat="playlist in playlists[lang.id]" btn="loop" ng-click="play(playlist); coModuleInstance.$exec('display_on');">
                            <div class="img"><img ng-src="{{playlist.poster_url}}"></div>
                            <h1 class="desc">{{playlist.name}}</h1>
                            <div class="cover" ng-if="scheduled_id == playlist.id" ng-click="$event.stopPropagation()"><i class="pe-7s-check"></i></div>
                        </button>
                    </div>
                </div>

            </pane>
        </tabs>
        <div id="scheduling" ng-class="{visible: scheduling}"><div class="spinner"></div></div>
    </div>
</div>
