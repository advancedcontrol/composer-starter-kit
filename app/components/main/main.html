
<!-- Show the system when online, here for performance and pre-load -->
<article  ng-if="state && state !== 'shutdown'" co-bind="'pages'">
    <div co-module="'Joiner'" co-bind="'rooms' as $root.roomNames">
        <div co-bind="'joined' as $root.joinedRooms"></div>
    </div>

    <header co-bind="'name'">
        <div class="logo"><div></div></div>

        <div class="tray" ng-controller="Modals">

            <span class="name">{{name}}</span>

            <!-- Support for tray icons is here if we ever need them -->
        </div>
    </header>

    <div co-bind="'tabs'">
        <div co-bind="'tab'" exec>
            <!-- Tabs -->
            <tabs current="tab">
                <pane ng-repeat="tabType in tabs[state]" title="{{pages[tabType].title}}" icon="{{tabType}}" name="tabType">
                    <div ng-include="'components/main/' + tabType + '/' + tabType + '.html'">
                    </div>
                </pane>
            </tabs>

            <div ng-controller="Modals">
                <div ng-if="state === 'client'" ng-init="showModal('welcome')"></div>
                <modal name="welcome" title="Code Accepted">
                    <p>Enjoy your meeting.<br /><br />If you need any assistance at all please contact us via the Help and Support tab.</p>
                    <menu>
                        <button class="ok" co-binding="'System'"
                                ng-touch="coModuleInstance.$exec('tab', 'vision'); closeModal('welcome')">
                            Continue
                        </button>
                    </menu>
                    <div style="clear: both"></div>
                </modal>


                <modal name="sms_sent" title="SMS Support Request Sent">
                    <p>An AVPartners technician will be with you as soon as possible.</p>
                    <menu>
                        <button class="ok" 
                                ng-touch="closeModal('sms_sent')">
                            Continue
                        </button>
                    </menu>
                    <div style="clear: both"></div>
                </modal>


                <modal name="bad_passcode" title="Access Code not accepted">
                    <p>Please double check the code entered.</p>
                    <menu>
                        <button class="ok" 
                                ng-touch="closeModal('bad_passcode')">
                            Continue
                        </button>
                    </menu>
                    <div style="clear: both"></div>
                </modal>

                <modal name="preset_recalled" title="Audio Preset Recalled">
                    <p>The preset selected has been called.</p>
                    <menu>
                        <button class="ok" 
                                ng-touch="closeModal('preset_recalled')">
                            Continue
                        </button>
                    </menu>
                    <div style="clear: both"></div>
                </modal>
            </div>
        </div>
    </div>
</article>
